<!DOCTYPE html>
<html>
<head>
  <link rel="shortcut icon" href="favicon.ico">
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="./css/phone.css">
  <link rel="stylesheet" href="./vendor/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="style.css">
  <base target="_blank">
  <script src="slide_config.js"></script>
  <script data-main="./js/slides" src="./js/require-1.0.8.min.js"></script>
  <style>

    .highlight hgroup {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background-color: rgba(0, 0, 0, 0.6);
      padding: 20px 25px;
      border-radius: 5px
    }

    .highlight hgroup h2, .highlight hgroup h3 {
      color: white
    }

    @media print {
      slide {
        width: 100%;
      }
    }

  </style>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen-faux">

  <!--
    <slide class="logoslide nobackground">
      <article class="flexbox vcenter">
        <span><img src="./images/codecentric-logo.png"></span>
      </article>
    </slide>
  -->

  <slide class="title-slide segue nobackground">
    <aside class="gdbar">
      <img src="./images/codecentric-logo-only.png">
    </aside>
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>

      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>

      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide>
    <article>
      <ul class="speakers">
        <li id="speaker-robert">
          <span class="name">Robert Hostlowsky</span>
          <img src="Robert-Hostlowsky.png"
               width="180px"
               alt="Robert Hostlowsky"
               class="avatar">
          <ul class="social">
            <li>
              <i class="icon-twitter"></i>
              <a href="https://twitter.com/rhosts">
                @rhosts
              </a>
            </li>
            <li>
              <i class="icon-github"></i>
              <a href="https://github.com/lowsky/">
                github.com/lowsky
              </a>
            </li>
            <li>
              <i class="icon-envelope"></i>
              <a href="mailto:robert.hostlowsky@codecentric.de">
                robert.hostlowsky@codecentric.de
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>How developer's life gets easier</h2>
    </hgroup>
    <article class="flexbox vcenter" style="font-size: 1.5em">
      <section>
        <ul>
          <li>Situation
            <ul>
              <li>One pipeline</li>
            </ul>
          </li>
          <li>Solution
            <ul>
              <li><b>Multiple pipelines</b></li>
            </ul>
          </li>
          <li>
            Demo
          </li>
          <li>Summary</li>
        </ul>
      </section>
    </article>
  </slide>

  <slide class="highlight fill nobackground"
         style="background-image: url('ship_1527797.jpg')">
    <hgroup><h2>Shipping ...</h2></hgroup>
  </slide>

  <slide class="highlight fill nobackground"
         style="background-image: url('shipshippingship.png');">
    <hgroup><h2>Shipping ...</h2></hgroup>
    <article class="flexbox vcenter">
    </article>
  </slide>

  <slide class="highlight fill nobackground"
         style="background-image: url('git-model@2x.png');">
    <hgroup><h2>Git helps us to handle complexity ...</h2></hgroup>
  </slide>

  <slide class="fill nobackground highlight"
         style="background-image: url('Octocat.png')">
    <hgroup><h2>GitHub</h2></hgroup>
  </slide>

  <slide class="highlight fill">
    <article class="flexbox vcenter">
      <h2>So our deployments should be easy, right?</h2>
    </article>
  </slide>

  <slide class="fill nobackground"
         style="background-image: url('http://upload.wikimedia.org/wikipedia/commons/archive/6/65/20080130150928%21Deutsche_Post-Filiale_Tegernseer_Landstr._-_Waiting_line.JPG')">
    <article class="flexbox vcenter">

      <h1 class="centered" style="color: #ffffff; font-size: 3em; position: absolute;
      border-radius: 0.5em;
      padding: 0.5em;
      background-color: rgba(0,0,0,0.4);
bottom: 0.5em; right: 0.5em; ">
        Still waiting?
      </h1>
    </article>
  </slide>

  <slide class="highlight fill">
    <article class="flexbox vcenter">
      <h2>Is this your deployment pipeline?</h2>
    </article>
  </slide>

  <slide>
    <article class="flexbox vcenter">
      <img src="pipeline.png"/>
    </article>
  </slide>

  <slide>
    <hgroup><h2>Classic Build Pipeline Setup</h2></hgroup>
    <article class="flexbox vcenter">
      <img src="jenkBuildPipe_bpp1.png"/>
    </article>
  </slide>

  <!--
  <slide>
    <hgroup><h2>Kanban, WIP limit</h2></hgroup>
    <article class="flexbox vcenter">
      <img src="mcpa.biz_Kanban-Board.png" width="100%">
    </article>
  </slide>
  -->

  <slide>
    <hgroup>
      <h2>Our Solution</h2>

      <h3>Important steps to remove typical bottlenecks:</h3>
    </hgroup>
    <article class="flexbox ">
      <ul class="build">
        <li>Use branches for each feature or hot-fix</li>
        <li>Have automated tests</li>
        <li>Have pre-commit testing, before merging into master</li>
        <li><b>Have each feature branch deployed on your stage.</b></li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup><h2>Dockerize a Node webapp</h2></hgroup>
    <article>
      <pre class="prettyprint" data-lang="Dockerfile">
        FROM iojs:1.6.3-onbuild
        # That's all.

        # + using unusual runtime - here: io.js
        # + automatically runs npm install on-build
        # + copies additional files considering .dockerignore
      </pre>
    </article>
  </slide>

  <slide>
    <hgroup><h2>GitHub Branching</h2>

      <h3>Idea: Let's have one branch per feature</h3></hgroup>
    <article class="flexbox vcenter">
      <img src="Branching_git-merge.png" width="800px"/>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Tagging the Docker Image</h2>

      <h3>'latest' won't work.</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="bash">
PROJ=project-x
GIT_BRANCH=feature-1

IMAGE=$PROJ:$GIT_BRANCH
CONTAINER=$PROJ_$GIT_BRANCH

docker build -t $IMAGE .
docker run -d -P \
    --name $NAME $IMAGE

# optionally add git_hash ...
        </pre>
    </article>
  </slide>

  <slide>
    <article class="flexbox vcenter">
      <h2>
        Nice!
        <br/>
        <br/>
        ... who can send me <span style="text-decoration: underline;color: #0000ff;">a link</span> to
        the latest version?
      </h2>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Nginx Proxy</h2>
    </hgroup>
    <article>
      <p>Possible mapping schemes:</p>
      <ul>
        <li>Forwarding to "upstream servers":
        </li>
        <comment>http:// <b>feature-1_ABD134EF</b> .stage.ci/project/ </comment>
        <li style="padding-top: 1em">Forwarding and url rewriting :</li>
        <comment>http://stage.ci/project/ <b>feature-1_ABD134EF</b></comment>
        </li>
      </ul>
      <p>Complex? These Nginx configurations should be generated and deleted automatically!</p>
    </article>
  </slide>

  <slide>
    <hgroup><h2>Solution: nginx-proxy</h2></hgroup>
    <article class="flexbox vcenter">
      <p>
        Jason Wilder created a simple tool for automatic Nginx proxy configuration:
      </p>
      <pre class="prettyprint">
      docker run -d -p 80:80 \
        -v /var/run/docker.sock:/tmp/docker.sock \
        -t jwilder/nginx-proxy
      </pre>
      <p>
        Built-in <b>Nginx</b>, listens to <b>docker events</b>, uses <b>docker-gen</b> with
        host-based-rules templating
      </p>
    </article>
  </slide>

  <slide>
    <hgroup><h2>Containers need extra parameter</h2></hgroup>
    <article class="flexbox vcenter">
      <pre class="prettyprint" data-lang="bash">
      docker run <b>-P</b> d -name project:branchName \
        <b> -e VIRTUAL_HOST=project-branchName.dev-stage</b>
        project:branchName
      </pre>
      <p>
      curl http://<b>project-branchName.dev-stage</b>/index.html
      </p>
      <p>
      Nginx gets automatically configured on start and stop.
      </p>
    </article>
  </slide>

  <slide class="highlight fill nobackground"
           style="background-image: url('DashboardDemo.png');background-size: contain">
      <hgroup><h2>Demo</h2></hgroup>
  </slide>

  <slide>
    <hgroup><h2>Alternatives</h2></hgroup>
    <article>
      <ul>
        <li><a href="http://www.haproxy.org/">HAProxy</a></li>
        <li><a href="https://coreos.com/">CoreOS</a> / <a href="https://github.com/coreos/etcd">etcd</a> / fleet</li>
        <li><a href="http://mesos.apache.org/">Apache Mesos, Marathon</a> + HAproxy</li>
        <li><a href="http://kubernetes.io/">Kubernetes</a></li>
      </ul>
    </article>
  </slide>

  <slide class="thank-you-slide segue fill">
    <aside class="gdbar right"><img src="images/codecentric-logo-only.png"></aside>
    <article class="flexbox vleft">
      <h2>Thanks For Listening</h2>
    </article>
    <p class="auto-fadein" data-config-contact>
      <!-- populated from slide_config.json -->
    </p>
  </slide>


  <slide>
    <hgroup><h3>Links</h3></hgroup>
    <article class="flexbox">
      <section>
        <ul>
          <li>
            <a href="https://github.com/lowsky/dashboard/">Dashboard Project</a>
          </li>
          <li><a href="http://git-scm.com/book/de/v1/Git-Branching-Branching-Workflows">git branching workflows</a></li>
          <li><a href="http://www.threeriversinstitute.org/blog/?p=566">Kent Beck: Why Accelerate Deployment?</a></li>
          <li><a href="https://www.atlassian.com/git/tutorials/comparing-workflows/feature-branch-workflow">Atlassian' Git Tutorial</a></li>
          <li><a href="http://nvie.com/posts/a-successful-git-branching-model/">Git Branching Model</a></li>

          <li><a href="http://jasonwilder.com/blog/2014/03/25/automated-nginx-reverse-proxy-for-docker/">Jason Wilder's Automated-Nginx-reverse-proxy for Docker</a></li>
          <li><a href="https://github.com/jwilder/docker-gen">Docker-Gen</a></li>

          <li><a href="http://thekelleys.org.uk/dnsmasq/doc.html">dnsmasq</a></li>

          <li><a href="http://anandmanisankar.com/posts/docker-container-nginx-node-redis-example/">Docker Nginxnode Redis Example</a></li>
        </ul>
      </section>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h3>Images</h3>
    </hgroup>
    <article class="flexbox">
      <section>
        <ul>
          <li>
            <a href="http://blog.education.nationalgeographic.com/2015/01/14/enabling-globalization-the-container/">Ship
              other shipping ships</a></li>
          <li>
          <li><a href="http://geographyeducation.org/2013/10/14/ship-shipping-ships/">Ship-Shipping Ships</a></li>
          <li>
            <a title="By User:Mattes (Own work) [CC BY-SA 3.0 (http://creativecommons.org/licenses/by-sa/3.0)], via Wikimedia Commons"
               href="http://commons.wikimedia.org/wiki/File%3ADeutsche_Post-Filiale_Tegernseer_Landstr._-_Waiting_line.JPG">Deutsche Post Filiale (Mattes)</a>
          </li>
          <li>
            <a href="http://www.cloudsidekick.com/blog/expanding-your-cd-pipeline-part-one.html">Complete Delivery
              Pipeline</a>
          </li>
          <li><a href="https://github.com/logos">Octocat</a></li>
          <li>
            <a href="http://twasink.net/2011/09/20/git-feature-branches-and-jenkins-or-how-i-learned-to-stop-worrying-about-broken-builds/">Software
              is too expensive to build cheaplyâ€¦</a></li>
          <li><a href="http://nvie.com/posts/a-successful-git-branching-model/">A successful Git branching model</a>
          </li>
        </ul>
      </section>
    </article>
  </slide>

  <slide class="backdrop"></slide>

</slides>

</body>
</html>
